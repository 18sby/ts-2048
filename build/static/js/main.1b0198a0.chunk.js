(this["webpackJsonpts-2048"]=this["webpackJsonpts-2048"]||[]).push([[0],{14:function(t,e,n){},15:function(t,e,n){},16:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n(1),i=n.n(r),o=n(4),c=n.n(o),u=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,i=e.getLCP,o=e.getTTFB;n(t),a(t),r(t),i(t),o(t)}))},s=(n(14),n(5)),h=n(6),f=n(8),v=n(7),l=n(3);n(15);function d(t){var e=JSON.parse(JSON.stringify(t));return e=e.map((function(t){return t.map((function(t){return Number(t)}))}))}function g(t){var e=[[0,0],[0,3],[3,3],[3,0]].filter((function(e){var n=Object(l.a)(e,2),a=n[0],r=n[1];return 0===t[a][r]}));if(0===e.length)return t;var n=e.length,a=Math.floor(Math.random()*n),r=Object(l.a)(e[a],2),i=r[0],o=r[1],c=d(t);return c[i][o]=2,c}var b=function(t){Object(f.a)(n,t);var e=Object(v.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).state=void 0,a.updateData=function(t){var e,n=!0;t:for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)if(0===t[r][i]){n=!1;break t}n||(e=g(t)),a.setState({data:e||t,gameOver:n})},a.initKeyListener=function(){document.onkeydown=function(t){switch((t=t||window.event).keyCode){case 37:a.left();break;case 38:a.up();break;case 39:a.right();break;case 40:a.down()}}},a.state={data:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],touchX:0,touchY:0,gameContainer:{current:null},gameOver:!1},a}return Object(h.a)(n,[{key:"left",value:function(){var t=d(this.state.data),e=0,n=function(){for(var n=0;n<t.length;n++)for(var a=t[n],r=a.length-2;r>=0;r--)a[r]===a[r+1]&&0!==a[r]&&(a[r]=2*a[r],a[r+1]=0,e++)},a=function(){e=0;for(var n=0;n<t.length;n++)for(var a=t[n],r=0;r<a.length;r++)if(0!==a[r])for(var i=r-1;i>=0&&0===a[i];)a[i]=a[i+1],a[i+1]=0,i--};do{a(),n()}while(e>0);this.updateData(t)}},{key:"up",value:function(){var t=d(this.state.data),e=0,n=function(){for(var n=0;n<t[0].length;n++)for(var a=t.length-2;a>=0;a--)t[a][n]===t[a+1][n]&&0!==t[a][n]&&(t[a][n]=2*t[a][n],t[a+1][n]=0,e++)},a=function(){e=0;for(var n=0;n<t[0].length;n++)for(var a=1;a<t.length;a++)if(0!==t[a][n])for(var r=a-1;r>=0&&0===t[r][n];)t[r][n]=t[r+1][n],t[r+1][n]=0,r--};do{a(),n()}while(e>0);this.updateData(t)}},{key:"right",value:function(){var t=d(this.state.data),e=0,n=function(){for(var n=0;n<t.length;n++)for(var a=t[n],r=1;r<a.length;r++)a[r]===a[r-1]&&0!==a[r]&&(a[r]=2*a[r],a[r-1]=0,e++)},a=function(){e=0;for(var n=0;n<t.length;n++)for(var a=t[n],r=a.length-1;r>=0;r--)if(0!==a[r])for(var i=r+1;i<a.length&&0===a[i];)a[i]=a[i-1],a[i-1]=0,i++};do{a(),n()}while(e>0);this.updateData(t)}},{key:"down",value:function(){var t=d(this.state.data),e=0,n=function(){for(var n=0;n<t[0].length;n++)for(var a=1;a<t.length;a++)t[a][n]===t[a-1][n]&&0!==t[a][n]&&(t[a][n]=2*t[a][n],t[a-1][n]=0,e++)},a=function(){e=0;for(var n=0;n<t[0].length;n++)for(var a=t.length-1;a>=0;a--)if(0!==t[a][n])for(var r=a+1;r<t.length&&0===t[r][n];)t[r][n]=t[r-1][n],t[r-1][n]=0,r++};do{a(),n()}while(e>0);this.updateData(t)}},{key:"touchStart",value:function(t){this.setState({touchX:t.pageX,touchY:t.pageY})}},{key:"touchEnd",value:function(t){var e=this.state,n=e.touchX,a=e.touchY,r=t.pageX-n,i=t.pageY-a;Math.abs(r)>Math.abs(i)?r>=0?this.right():this.left():i>=0?this.down():this.up()}},{key:"initTouchListener",value:function(){var t=this;this.state.gameContainer.current.ontouchstart=function(e){t.touchStart(e.changedTouches[0])},this.state.gameContainer.current.ontouchend=function(e){t.touchEnd(e.changedTouches[0])}}},{key:"reset",value:function(){var t=g(g([[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]));this.setState({data:t,touchX:0,touchY:0,gameOver:!1})}},{key:"componentDidMount",value:function(){this.initKeyListener(),this.initTouchListener();var t=g(this.state.data);this.updateData(t),this.setState({gameContainer:i.a.createRef()})}},{key:"render",value:function(){var t=this;return Object(a.jsxs)("div",{className:"game-container",ref:this.state.gameContainer,children:[!0===this.state.gameOver?Object(a.jsx)("div",{className:"game-over"}):Object(a.jsx)("div",{}),this.state.data.map((function(t){return t.map((function(t,e){return Object(a.jsx)("div",{className:["square","back-"+t].join(" "),children:0===t?null:t},e)}))})),Object(a.jsx)("div",{className:"handle-area",children:Object(a.jsx)("button",{className:"reset",onClick:function(){return t.reset()},children:"\u91cd\u65b0\u5f00\u59cb"})})]})}}]),n}(r.Component);function j(){return Object(a.jsx)("div",{children:Object(a.jsx)(b,{})})}c.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(j,{})}),document.getElementById("root")),u()}},[[16,1,2]]]);
//# sourceMappingURL=main.1b0198a0.chunk.js.map